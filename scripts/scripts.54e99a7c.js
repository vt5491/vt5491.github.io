"use strict";angular.module("yoAngularVirginApp",["ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("yoAngularVirginApp").controller("MainCtrl",["$scope","main",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.init(),b.mainLoop()}]),angular.module("yoAngularVirginApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("yoAngularVirginApp").service("main",["$window","base",function(a,b){var c={};c.animationActive=!0,c.INIT_POSITION=new THREE.Vector3(0,1.5,2),c.BasePosition=new THREE.Vector3,c.BasePosition.copy(c.INIT_POSITION),c.INIT_ROTATION=new THREE.Quaternion,c.BaseRotation=new THREE.Quaternion,c.BaseRotation.copy(c.INIT_ROTATION),c.xyProjectionPlaneQuat=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),.2*b.ONE_DEGREE),c.cubeQuat=(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),.2*b.ONE_DEGREE);var d;return c.initWebGl=function(){this.width=a.innerWidth,this.height=a.innerHeight;try{this.canvas=document.getElementById("viewer"),this.renderer=new THREE.WebGLRenderer({antialias:!0,canvas:document.getElementById("viewer")})}catch(b){return alert("This application needs WebGL enabled! error="+b),!1}this.renderer.setClearColor(4395859,1),this.renderer.setSize(this.width,this.height),this.container=document.getElementById("container"),this.canvas.focus()},c.initScene=function(){d=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,this.width/this.height,1,1e4),this.camera.position.copy(this.BasePosition),this.camera.quaternion.copy(this.BaseRotation),this.camera.quaternion.copy(this.BaseRotation),this.controls=new THREE.VRControls(this.camera),this.camera.position.z=100,this.effect=new THREE.VREffect(this.renderer),this.effect.setSize(this.width,this.height),this.vrManager=new WebVRManager(this.renderer,this.effect),this.xyProjectionPlane=new THREE.Object3D;var a,b;a=new THREE.PlaneBufferGeometry(4,2),b=new THREE.MeshBasicMaterial({color:16776960,side:THREE.DoubleSide}),this.xyProjectionMesh=new THREE.Mesh(a,b),this.xyProjectionPlane.add(this.xyProjectionMesh),this.xyProjectionPlane.position.set(0,1,-8),d.add(this.xyProjectionPlane),a=new THREE.BoxGeometry(25,25,25),b=new THREE.MeshNormalMaterial,this.cube=new THREE.Mesh(a,b),d.add(this.cube)},c.init=function(){this.initWebGl(),this.initScene()},c.updateScene=function(){this.controls.update(),this.xyProjectionPlane.quaternion.multiply(this.xyProjectionPlaneQuat),this.cube.quaternion.multiply(this.cubeQuat)},c.mainLoop=function(){this.animationActive&&window.requestAnimationFrame(this.mainLoop.bind(this)),this.vrManager.render(d,this.camera),this.updateScene()},c}]),angular.module("yoAngularVirginApp").service("base",[function(){var a={};return a.ONE_DEGREE=Math.PI/180,a.CAMERA_MOVE_DELTA=1,a.CAMERA_ROT_DELTA=10,a.COLOR_YELLOW=new THREE.Color(100,255,0),a.COLOR_GREEN=new THREE.Color(0,255,0),a.COLOR_BLUE=new THREE.Color(0,0,255),a.COLOR_ORANGE=new THREE.Color(255,165,0),a.COLOR_WHITE=new THREE.Color(255,255,255),a.COLOR_BROWN=new THREE.Color(139,69,19),a}]),angular.module("yoAngularVirginApp").service("utils",function(){}),angular.module("yoAngularVirginApp").controller("WebvrappCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("yoAngularVirginApp").controller("CustCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],cust.js}]),angular.module("yoAngularVirginApp").directive("canvasKeys",["$document","$rootScope","main","base",function(a,b,c,d){return{restrict:"A",link:function(b,e,f){var g=function(a){switch(a.preventDefault(),a.keyCode){case"S".charCodeAt(0):c.camera.translateZ(d.CAMERA_MOVE_DELTA);break;case"W".charCodeAt(0):c.camera.translateZ(-d.CAMERA_MOVE_DELTA);break;case"A".charCodeAt(0):c.camera.translateX(d.CAMERA_MOVE_DELTA);break;case"D".charCodeAt(0):c.camera.translateX(-d.CAMERA_MOVE_DELTA);break;case"Q".charCodeAt(0):c.cube.rotation.z+=d.ONE_DEGREE*d.CAMERA_ROT_DELTA;break;case"E".charCodeAt(0):c.cube.rotation.z+=-d.ONE_DEGREE*d.CAMERA_ROT_DELTA;break;case"P".charCodeAt(0):c.camera.translateY(-d.CAMERA_MOVE_DELTA);break;case"N".charCodeAt(0):c.camera.translateY(d.CAMERA_MOVE_DELTA);break;case"R".charCodeAt(0):c.BasePosition.copy(c.INIT_POSITION),c.BaseRotation.copy(c.INIT_ROTATION)}};a.on("keydown",g),e.on("keydown",g)}}}]);